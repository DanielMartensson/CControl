/*
 ============================================================================
 Name        : qr.c
 Author      : Daniel MÃ¥rtensson
 Version     : 1.0
 Copyright   : MIT
 Description : QR factorization
 ============================================================================
 */

#include "CControl/ccontrol.h"

int main() {

	/* Create A matrix */
	float A[9 * 3] = { 0.000000000000000000,	0.000000000000000000,	0.035355340689420700,
					 0.707106769084930420,	0.000000000000000000,	0.000000000000000000,
					 0.000000000000000000,	0.707106828689575200,	0.000000000000000000,
					 0.000000000000000000,	0.000000000000000000,	-0.035355340689420700,
					-0.707106769084930420,	0.000000000000000000,	0.000000000000000000,
					 0.000000000000000000,	-0.707106828689575200,	0.000000000000000000,
					 0.100000001490116120,	0.000000000000000000,	0.000000000000000000,
					 0.000000000000000000,	0.100000001490116120,	0.000000000000000000,
					 0.000000000000000000,	0.000000000000000000,	0.100000001490116120 };

	/* Create Q and R matrices */
	float Q[9 * 9];
	float R[9 * 3];

	/* Q*R = A */
	bool ok = qr(A, Q, R, 9, 3, false);

	/* Print Q */
	print(Q, 9, 9);

	/* Print R */
	print(R, 9, 3);

	/* Status */
	printf("QR was OK: %s\n", ok ? "yes" : "no");

	return EXIT_SUCCESS;
}